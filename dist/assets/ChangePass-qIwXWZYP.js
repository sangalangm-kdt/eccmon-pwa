import{r as t,c as F,b as B,j as s}from"./index-DxRgMXU3.js";import{I,n as w,o as x}from"./index-6sAmpQ8Q.js";const L=()=>{const[r,u]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{changePassword:p}=F(),[a,o]=t.useState({}),[y,m]=t.useState(!1),[n,b]=t.useState(!1),[d,P]=t.useState(!1),[l,j]=t.useState(!1),[N,g]=t.useState(!1),f=B(),c=e=>{const{name:h,value:E}=e.target;u({...r,[h]:E}),o({...a,[h]:""})},k=()=>{const e={};return r.currentPassword||(e.currentPassword="Current password is required."),r.newPassword?r.newPassword.length<8&&(e.newPassword="New password must be at least 8 characters long."):e.newPassword="New password is required.",r.confirmPassword?r.newPassword!==r.confirmPassword&&(e.confirmPassword="Passwords do not match."):e.confirmPassword="Please confirm your new password.",o(e),Object.keys(e).length===0},v=e=>{e.preventDefault(),k()&&(p({current_password:r.currentPassword,password:r.newPassword,password_confirmation:r.confirmPassword}),m(!0),u({currentPassword:"",newPassword:"",confirmPassword:""}),o({}))},C=()=>{f("/profile")},i=e=>{e==="currentPassword"?b(!n):e==="newPassword"?P(!d):e==="confirmPassword"&&j(!l)},S=()=>{g(!0),setTimeout(()=>{m(!1),f("/"),g(!1)},2e3)};return s.jsxs("div",{className:"flex h-screen flex-col justify-between",children:[s.jsxs("div",{className:"flex w-full items-center justify-start rounded-b-xl py-6 shadow-md dark:bg-gray-700",children:[s.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-1 rounded-full p-2",children:[s.jsx(I,{className:"text-gray-700 dark:text-gray-100"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-100",children:"Back"})]}),s.jsx("h1",{className:"ml-18 flex-grow font-medium text-gray-700 dark:text-gray-100",children:"Change Password"})]}),s.jsxs("form",{onSubmit:v,className:"mt-8 flex flex-grow flex-col gap-4 px-4 text-sm",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"currentPassword",className:"text-gray-600 dark:text-gray-50",children:"Current password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:n?"text":"password",id:"current-password",name:"currentPassword",value:r.currentPassword,onChange:c,className:"w-full gap-2 rounded border p-2 text-gray-700 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-100",placeholder:"Enter current password"}),s.jsx("button",{type:"button",onClick:()=>i("currentPassword"),className:"absolute right-3 top-3",children:n?s.jsx(w,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(x,{className:"text-gray-600 dark:text-gray-50"})})]}),a.currentPassword&&s.jsx("p",{className:"text-xs text-red-500",children:a.currentPassword})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"newPassword",className:"text-gray-600 dark:text-gray-50",children:"New password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d?"text":"password",id:"new-password",name:"newPassword",value:r.newPassword,onChange:c,className:"w-full rounded border p-2 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-50",placeholder:"Enter new password"}),s.jsx("button",{type:"button",onClick:()=>i("newPassword"),className:"absolute right-3 top-3",children:d?s.jsx(w,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(x,{className:"text-gray-600 dark:text-gray-50"})})]}),a.newPassword&&s.jsx("p",{className:"text-xs text-red-500",children:a.newPassword})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"confirmNewPassword",className:"text-gray-600 dark:text-gray-50",children:"Confirm new password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l?"text":"password",id:"confirm-new-password",name:"confirmPassword",value:r.confirmPassword,onChange:c,className:"w-full rounded border p-2 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-50",placeholder:"Confirm new password"}),s.jsx("button",{type:"button",onClick:()=>i("confirmPassword"),className:"absolute right-3 top-3",children:l?s.jsx(w,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(x,{className:"text-gray-600 dark:text-gray-50"})})]}),a.confirmPassword&&s.jsx("p",{className:"text-xs text-red-500",children:a.confirmPassword})]}),s.jsx("div",{className:"mb-10 mt-auto",children:s.jsx("button",{type:"submit",className:"hover:bg-primary-dark w-full rounded bg-cyan-to-blue py-4 text-white focus:bg-cyan-to-blue-active focus:outline-none",children:"Update Password"})})]}),y&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800",children:[s.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-700 dark:text-gray-50",children:"Success!"}),s.jsx("p",{className:"mb-6 text-sm text-gray-600 dark:text-gray-300",children:"Your password has been updated successfully."}),s.jsx("button",{onClick:S,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:N?s.jsx("div",{className:"spinner-border spinner-border-sm text-white",role:"status",children:s.jsx("span",{className:"sr-only",children:"Loading..."})}):"Back to Login"})]})})]})};export{L as default};
