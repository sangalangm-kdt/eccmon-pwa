import{f as h,l as o,b as p,k as f}from"./index-CVX-mQLn.js";const m=()=>{const{user:a}=h(),n=()=>o.get("/sanctum/csrf-cookie");return{addHistory:async d=>{const r={serialNumber:d.serialNumber,userId:a==null?void 0:a.id,status:d.status};console.log(r),await n(),o.post("/api/scan-history",r).then(l=>{}).catch(l=>{if(l.response.status!==422)throw l})}}},C=()=>{const a=()=>o.get("/sanctum/csrf-cookie"),n=p(),{addHistory:u}=m(),{userId:d}=h(),{data:r,error:l,mutate:y}=f("/api/cylinder",()=>o.get("/api/cylinder").then(t=>t.data).catch(t=>{if(t.response.status!==409)throw t}));return{cylinder:r,checkSerial:async({setAddDisable:t,setMessage:i,setModalOpen:s,...e})=>{await a(),o.get(`/api/cylinder/${e.eccId}`).then(c=>{console.log(c.data),c.data.data?+c.data.data.isDisposed==1?(t(!0),i("Cylinder is already disposed"),s(!0)):n("/scanned-result",{replace:!0,state:c.data}):(t(!1),i("The cylinder cover does not exist. Do you want to add it?"),s(!0)),y()}).catch(c=>{if(c.response.status!==422)throw c})},addCylinder:async t=>{const i={serialNumber:t,isDisposed:2,status:"Storage",location:"None",userId:d};await a(),o.post("/api/cylinder",i).then(s=>{u({serialNumber:t,status:2}),n("/scanned-result",{state:s.data}),y()}).catch(s=>{if(s.response.status!==422)throw s})},updateCylinder:async t=>{const i={serialNumber:t.serialNumber,isDisposed:t.isDisposed,status:t.status,cycle:t.cycle},s=t.id;await a(),o.put(`/api/cylinder/${s}`,i).then(e=>{console.log(e)}).catch(e=>{if(e.response.status!==409)throw e})}}};export{C as u};
