import{j as s,m as O,n as R,o as q,L as z,r as t,c as F,b as A,u as D,I as B,h as P,i as y,ae as M}from"./index-DRAgKpwA.js";import{L as T}from"./Loader-BW1vD1Hr.js";const _=({result:e,onClose:c,message:l})=>e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(O,{size:24})})}),s.jsxs("div",{className:"flex flex-col items-center",children:[e==="success"?s.jsx(R,{size:50,className:"text-green-500"}):s.jsx(q,{size:50,className:"text-red-500"}),s.jsx("h2",{className:"mt-2 text-xl font-semibold text-gray-700 dark:text-white",children:e==="success"?"Successfully Changed!":"Error Occurred"}),s.jsx("p",{className:"mt-1 text-center text-gray-600 dark:text-gray-300",children:l})]}),s.jsx("div",{className:"mt-4 flex justify-center",children:e==="success"?s.jsx(z,{to:"/login",children:s.jsx("button",{className:"rounded bg-cyan-to-blue px-4 py-2 text-white hover:bg-cyan-600 dark:bg-cyan-700 dark:hover:bg-cyan-600",children:"Go to Login"})}):s.jsx("button",{onClick:c,className:"rounded bg-red-500 px-4 py-2 text-white hover:bg-red-600 dark:bg-red-700 dark:hover:bg-red-600",children:"Close"})})]})}):null,H=()=>{const[e,c]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{changePassword:l}=F(),[o,i]=t.useState({}),[p,j]=t.useState(""),[b,N]=t.useState(""),[x,k]=t.useState(!1),[m,v]=t.useState(!1),[w,C]=t.useState(!1),[u,g]=t.useState(!1),S=A(),{t:a}=D("profile"),h=r=>{const{name:n,value:d}=r.target;c({...e,[n]:d}),i({...o,[n]:""})},E=()=>{const r={};return e.currentPassword||(r.currentPassword=a("changePassword.currentPass")+" "+a("isRequired",{ns:"common"})),e.newPassword?e.newPassword.length<8&&(r.newPassword=a("changePassword.enterNewPass")):r.newPassword=a("changePassword.newPass")+" "+a("isRequired",{ns:"common"}),e.confirmPassword?e.newPassword!==e.confirmPassword&&(r.confirmPassword=a("changePassword.enterConfirmPass")):r.confirmPassword=a("changePassword.confirmPass")+" "+a("isRequired",{ns:"common"}),i(r),Object.keys(r).length===0},I=async r=>{if(r.preventDefault(),E()){g(!0);try{const n=await l({current_password:e.currentPassword,password:e.newPassword,password_confirmation:e.confirmPassword,setErrors:i,setLoading:g}),d=n.isSuccess?"success":"fail";j(d),d==="success"&&c({currentPassword:"",newPassword:"",confirmPassword:""}),N(n.message)}catch(n){console.error("Password change failed:",n)}finally{g(!1)}}},L=()=>{S("/profile")},f=r=>{r==="currentPassword"?k(!x):r==="newPassword"?v(!m):r==="confirmPassword"&&C(!w)};return s.jsxs("div",{className:"flex h-screen flex-col justify-between",children:[s.jsxs("div",{className:"flex w-full items-center justify-start rounded-b-xl py-6 shadow-md dark:bg-gray-700",children:[s.jsxs("button",{onClick:L,className:"flex items-center justify-center gap-1 rounded-full p-2",children:[s.jsx(B,{className:"text-gray-700 dark:text-gray-100"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-100",children:a("back",{ns:"common"})})]}),s.jsx("h1",{className:"flex-1 text-center font-medium text-gray-700 dark:text-gray-100 xs:mr-16",children:a("changePassword.title")})]}),s.jsxs("form",{onSubmit:I,className:"mt-8 flex flex-grow flex-col gap-4 px-4 text-sm",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"currentPassword",className:"text-gray-600 dark:text-gray-50",children:a("changePassword.currentPass")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:x?"text":"password",id:"current-password",name:"currentPassword",value:e.currentPassword,onChange:h,className:"w-full rounded border p-2 text-gray-700 outline-none dark:border-gray-400 dark:bg-gray-800 dark:text-gray-100",placeholder:a("changePassword.enterCurrentPass")}),s.jsx("button",{type:"button",onClick:()=>f("currentPassword"),className:"absolute right-3 top-3",children:x?s.jsx(P,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(y,{className:"text-gray-600 dark:text-gray-50"})})]}),o.currentPassword&&s.jsx("p",{className:"text-xs text-red-500",children:o.currentPassword})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"newPassword",className:"text-gray-600 dark:text-gray-50",children:a("changePassword.newPass")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:m?"text":"password",id:"new-password",name:"newPassword",value:e.newPassword,onChange:h,className:"w-full rounded border p-2 outline-none dark:border-gray-400 dark:bg-gray-800 dark:text-gray-50",placeholder:a("changePassword.enterNewPass")}),s.jsx("button",{type:"button",onClick:()=>f("newPassword"),className:"absolute right-3 top-3",children:m?s.jsx(P,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(y,{className:"text-gray-600 dark:text-gray-50"})})]}),o.newPassword&&s.jsx("p",{className:"text-xs text-red-500",children:o.newPassword})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"text-gray-600 dark:text-gray-50",children:a("changePassword.confirmPass")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:w?"text":"password",id:"confirm-new-password",name:"confirmPassword",value:e.confirmPassword,onChange:h,className:"w-full rounded border p-2 outline-none dark:border-gray-400 dark:bg-gray-800 dark:text-gray-50",placeholder:a("changePassword.enterConfirmPass")}),s.jsx("button",{type:"button",onClick:()=>f("confirmPassword"),className:"absolute right-3 top-3",children:w?s.jsx(P,{className:"text-gray-600 dark:text-gray-50"}):s.jsx(y,{className:"text-gray-600 dark:text-gray-50"})})]}),o.confirmPassword&&s.jsx("p",{className:"text-xs text-red-500",children:o.confirmPassword})]}),s.jsx("div",{className:"mb-10 mt-auto",children:s.jsx("button",{type:"submit",className:"hover:bg-primary-dark w-full rounded bg-cyan-to-blue py-4 text-white focus:outline-none",children:u?s.jsx(T,{label:a("updating",{ns:"common"})}):a("updatePassword",{ns:"common"})})})]}),s.jsx(_,{result:p,onClose:()=>j(""),message:b}),u&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-90 dark:bg-gray-900",children:s.jsx(M,{isLoading:u})})]})};export{H as default};
