import{G as k,l as v,b as U,u as $,f as D,r as o,j as e,I as E,F as z}from"./index-CVX-mQLn.js";function q(l){return k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 4.5A2.5 2.5 0 0 1 2.5 2h11A2.5 2.5 0 0 1 16 4.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 11.5zM2.5 3A1.5 1.5 0 0 0 1 4.5v7A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 13.5 3zm10.854 4.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708l3-3a.5.5 0 0 1 .708 0m0 2.5a.5.5 0 0 1 0 .708l-.5.5a.5.5 0 0 1-.708-.708l.5-.5a.5.5 0 0 1 .708 0"},child:[]}]})(l)}function M(l){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"3",y2:"15"},child:[]}]})(l)}const W=()=>{const l=()=>v.get("/sanctum/csrf-cookie");return{addReportBug:async({files:a,...i})=>{await l();const c=new FormData;return a.forEach(s=>{c.append("files[]",s.file)}),console.log("clicked",{...i,formData:c}),v.post("/api/bug-report",{...i,formData:c}).then(s=>{console.log("Upload successfully!"),console.log(s)}).catch(s=>{var d;console.log(s),(d=s.response)==null||d.status,console.log(s.response.data.message)})}}},O=()=>{const l=["Functional","Visual","Content","Security","Compatibility","Usability","Others"],h=U(),{t:a}=$("reportBugs"),i=()=>h("/profile"),{addReportBug:c}=W(),{userId:s}=D(),[d,f]=o.useState(!1),[y,w]=o.useState(!1),[u,b]=o.useState(""),[j,B]=o.useState(""),[x,N]=o.useState(""),[g,m]=o.useState([]),F=o.useRef(null),C=()=>f(!0),R=()=>f(!1),A=t=>{const p=Array.from(t.target.files).filter(n=>["image/png","image/jpeg","image/jpg","image/tiff","image/webp"].includes(n.type)).map(n=>({file:n,url:URL.createObjectURL(n)}));m(n=>[...n,...p])},S=t=>{m(r=>r.filter((L,p)=>p!==t))},T=t=>{t.preventDefault();try{console.log(`Bug Title: ${u}`),console.log(`Reason: ${x}`),console.log(`Images: ${g}`)}catch(r){console.log(`Error: ${r}`)}finally{b(""),N(""),m([])}console.log("Form submitted!")},I=()=>{c({userId:s,title:u,category:j,reason:x,files:g})};return console.log(g),e.jsxs("div",{className:"flex min-h-screen flex-col justify-between",children:[e.jsxs("div",{className:"fixed z-10 flex w-full items-center justify-center rounded-b-xl bg-white py-6 shadow-md dark:bg-gray-700",children:[e.jsxs("button",{onClick:i,className:"flex items-center justify-center gap-1 rounded-full p-2",children:[e.jsx(E,{className:"text-gray-700 dark:text-gray-100"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-100",children:"Back"})]}),e.jsx("h1",{className:"flex-1 text-center font-medium text-gray-700 dark:text-gray-100 xs:mr-12",children:a("reportBugsTitle")})]}),e.jsxs("div",{className:"m-4 mt-28 flex flex-grow flex-col gap-4 rounded bg-gray-50 p-6 px-4 text-sm dark:bg-gray-700",children:[e.jsx("h1",{className:"mb-2 text-center text-xl font-semibold text-gray-800 dark:text-white",children:a("reportABug")}),e.jsxs("form",{onSubmit:T,className:"flex flex-grow flex-col gap-4 px-4 text-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{htmlFor:"title",className:"text-gray-600 dark:text-gray-50",children:[a("bugTitle"),e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",id:"bug-title",name:"title",className:"w-full gap-2 rounded border p-2 text-gray-700 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-100",placeholder:a("enterBugTitle"),required:!0,autoComplete:"false",value:u,onChange:t=>b(t.target.value)})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{htmlFor:"title",className:"text-gray-600 dark:text-gray-50",children:["Category",e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsx("div",{className:"relative",children:e.jsx("select",{name:"category",id:"category",className:"w-full gap-2 rounded border p-2 text-gray-700 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-100",required:!0,autoComplete:"false",value:j,onChange:t=>B(t.target.value),children:l.map((t,r)=>e.jsx("option",{value:t,children:t},r))})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{htmlFor:"reason",className:"text-gray-600 dark:text-gray-50",children:[a("reason"),e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:F,type:"textarea",id:"reason",name:"reason",className:`${y?"h-52":""} w-full resize-none rounded border p-2 outline-none focus:border-0.5 focus:border-primary dark:border-gray-400 dark:bg-gray-800 dark:text-gray-100`,placeholder:a("whatWentWrong"),rows:5,required:!0,onFocus:C,onBlur:R,value:x,onChange:t=>N(t.target.value)}),e.jsx(q,{className:`absolute bottom-2 right-1 cursor-pointer ${d?"fill-primary dark:fill-gray-400":"fill-gray-400"}`,onClick:()=>{w(!y)}})]})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"confirmNewPassword",className:"text-gray-600 dark:text-gray-50",children:a("uploadSupportingDocument")}),e.jsx("ul",{id:"uploadList",className:"my-4 grid grid-cols-3 gap-3",children:g.map(({url:t},r)=>e.jsxs("li",{className:"relative",children:[e.jsx("img",{src:t,alt:`upload-${r}`,className:"h-24 w-24 rounded object-cover"}),e.jsx("button",{className:"absolute -right-1 -top-1 h-4 w-4 rounded-full bg-red-500 p-1 text-white",onClick:()=>S(r),children:e.jsx(z,{className:"h-2 w-2"})})]},r))}),e.jsx("input",{type:"file",id:"fileUpload",accept:".png, .jpg, .jpeg, .tiff, .webp",multiple:!0,className:"hidden",onChange:A}),e.jsx("div",{className:"text-center",children:e.jsxs("label",{htmlFor:"fileUpload",className:"inline-flex cursor-pointer items-center gap-2 rounded bg-orange-400 px-4 py-2 text-white",children:[e.jsx(M,{}),a("selectFiles")]})})]}),e.jsx("div",{className:"mb-10 mt-auto",children:e.jsx("button",{type:"button",onClick:I,className:"hover:bg-primary-dark w-full rounded bg-cyan-to-blue py-4 text-white focus:bg-cyan-to-blue-active focus:outline-none",children:a("reportBtn")})})]})]})]})};export{O as default};
