import{j as e,ab as f,r,b as y,ac as j,ad as N,c as P}from"./index-DRAgKpwA.js";const v=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-96 rounded-lg bg-white p-6 text-center shadow-lg",children:[e.jsx(f,{className:"mx-auto text-green-500",size:50}),e.jsx("h2",{className:"mt-2 text-xl font-bold text-gray-700",children:"Success!"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Your password has been successfully changed."}),e.jsx("button",{onClick:s,className:"mt-4 w-full rounded bg-cyan-to-blue p-2 text-white hover:bg-blue-600",children:"OK"})]})}),k=()=>{const[s,m]=r.useState(""),[t,x]=r.useState(""),[n,c]=r.useState(""),[l,o]=r.useState(""),[h,b]=r.useState(!1),d=y(),[p]=j(),i=p.get("email"),{token:u}=N(),{resetPassword:w}=P({middleware:"guest",redirectIfAuthenticated:"/dashboard"}),g=async a=>{if(a.preventDefault(),c(""),o(""),!u||!i){o("Invalid password reset link.");return}if(s!==t){o("Passwords do not match.");return}try{await w({token:u,email:i,password:s,password_confirmation:t}),c("Password reset successfully!"),setTimeout(()=>d("/"),2e3)}catch{o("Failed to reset password. Please try again.")}};return e.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-secondary",children:[e.jsxs("div",{className:"rounded-lg bg-white p-8 text-center shadow-md",children:[e.jsx("h1",{className:"mb-2 text-xl font-bold text-gray-700",children:"Reset Password"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"You can now change your password."}),e.jsx("label",{className:"block text-left text-sm text-gray-600",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:s,onChange:a=>m(a.target.value),required:!0,className:"w-full rounded border border-gray-300 p-2 text-sm focus:outline-cyan-400"}),e.jsx("label",{className:"block text-left text-sm text-gray-600",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:t,onChange:a=>x(a.target.value),required:!0,className:"w-full rounded border border-gray-300 p-2 text-sm focus:outline-cyan-400"}),e.jsx("button",{type:"submit",className:"w-full rounded bg-cyan-to-blue p-2 text-white hover:bg-blue-600 disabled:opacity-50",disabled:!s||!t||s!==t,onClick:()=>b(!0),children:"Submit"})]}),l&&e.jsx("p",{className:"mt-4 text-sm text-red-500",children:l}),n&&e.jsx("p",{className:"mt-4 text-sm text-green-500",children:n})]}),h&&e.jsx(v,{onClose:()=>d("/")})]})};export{k as default};
